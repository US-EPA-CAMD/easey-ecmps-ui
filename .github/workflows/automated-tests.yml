name: Automated Tests-CRON

on:
  schedule:
    # Runs "At 00:00, only on Friday and Tuesday" (see https://crontab.guru) 
    - cron: '0 0 * * 5,2'

jobs:
  Automated-Tests:
    runs-on: ubuntu-latest
    steps:
      - name: Set up JDK
        uses: actions/setup-java@v1
        with:
          java-version: 1.8

      - name: Checkout repo
        uses: actions/checkout@v3

      - name: Checkout testing repo
        uses: actions/checkout@v3
        with: 
          repository: US-EPA-CAMD/easey-testing
          path: easey-testing
          
      - name: Setup & Configure Node
        uses: actions/setup-node@v3
        with:
          node-version: 16
          registry-url: https://npm.pkg.github.com/
          scope: '@us-epa-camd'

      - name: Run
        run: mvn clean test -Dname=Test_ECMPSUI_SMK_MonPlanPage
        env:
          NODE_AUTH_TOKEN: ${{ secrets.GITHUB_TOKEN }} 
